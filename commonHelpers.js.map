{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-app.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n    \nconst galleryEl = document.querySelector('.gallery-o');\nconst formElem = document.querySelector('.search-form');\nconst lightbox = new SimpleLightbox('.gallery-o');\n\n\n\nconst options = {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  animation: 250,\n};\nexport function renderImages(array) {\n    const markup = array\n        .map(\n        ({\n            largeImageURL,\n            webformatURL,\n            tags,\n            likes,\n            views,\n            comments,\n            downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.innerHTML = markup;\n\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n}\n\n\nexport function renderMoreImages(images) {\n    const hitsArray = images['hits'];\n    const markup = hitsArray\n        .map(\n    ({ largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        }) => {\n            return `\n        <div class=\"gallery\">\n            <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" width=\"380\" height=\"220\" />\n            <ul class=\"info-cards-container\">\n                <li class=\"info-cards-elements\">likes<span>${likes}</span></li>\n                <li class=\"info-cards-elements\">views<span>${views}</span></li>\n                <li class=\"info-cards-elements\">comments<span>${comments}</span></li>\n                <li class=\"info-cards-elements\">downloads<span>${downloads}</span></li>\n            </ul>\n            </a>\n        </div>\n        `;\n        }\n        )\n        .join('');\n    galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n    const lightbox = new SimpleLightbox('.gallery-o a', options);\n    lightbox.on('show.simplelightbox');\n    lightbox.refresh();\n    formElem.reset();\n    \n    const height = galleryEl.firstElementChild.getBoundingClientRect().height;\n    scrollBy({\n        behavior: 'smooth',\n        top: height * 2,\n    })\n}\n","import axios from 'axios';\n\nimport { value } from '../main.js';\nimport { page } from '../main.js';\n\nexport async function getPhotoBySearch(value, currentPage) {\n  try {\n    const KEY = '42516413-5d4d39fc32c8318bac1e6503b';\n    const response = await axios.get('https://pixabay.com/app/', {\n      params: {\n        key: KEY,\n        q: value,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: '15',\n      },\n    });\n\n    if (response.data.total === 0) {\n      throw new Error('Found no images');\n    }\n\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function fetchMoreImages(value, currentPage) {\n  try {\n    const params = new URLSearchParams({\n      key: '42516413-5d4d39fc32c8318bac1e6503b',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: '15',\n      page: currentPage,\n    });\n\n    let images = await axios.get(`https://pixabay.com/app/?${params}`);\n    if (images.data.total === 0) {\n      throw new Error('Found no images');\n    }\n\n    return images.data;\n  } catch (error) {\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { renderImages } from './js/render-functions.js';\nimport { getPhotoBySearch } from './js/pixabay-app.js';\nimport { renderMoreImages } from './js/render-functions.js';\nimport { fetchMoreImages } from './js/pixabay-app.js';\n\nconst formElem = document.querySelector('.search-form');\nconst galleryEl = document.querySelector('.gallery-o');\nconst loaderElem = document.querySelector('.loader');\nconst loaderElem2 = document.querySelector('.loader2');\nconst loadMoreBtn = document.querySelector('.more-btn');\nexport let value;\nexport let page;\nlet maxPage;\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  hideLoader();\n\n  formElem.addEventListener('submit', onSubmit);\n\n  async function onSubmit(e) {\n    e.preventDefault();\n    showLoader();\n    galleryEl.innerHTML = '';\n    page = 1;\n    value = formElem.querySelector('.input-search').value;\n\n    try {\n      const data = await getPhotoBySearch(value, page);\n      renderImages(data.hits);\n      maxPage = Math.ceil(data.totalHits / 15);\n    } catch (error) {\n      renderError(error);\n    } finally {\n      hideLoader();\n      checkBtnVisibleStatus();\n    }\n  }\n});\n\nfunction renderError(error) {\n  galleryEl.innerHTML = '';\n  iziToast.show({\n    message: `❌ \"${error}\". Please try again!`,\n    color: 'red',\n    position: 'topRight',\n    maxWidth: '400px',\n  });\n}\n\nfunction showLoader() {\n  loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loaderElem.style.display = 'none';\n}\nfunction showLoader2() {\n  loaderElem2.classList.remove('hidden');\n}\n\nfunction hideLoader2() {\n  loaderElem2.classList.add('hidden');\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  showLoader2();\n  try {\n    const images = await fetchMoreImages(value, page);\n\n    renderMoreImages(images);\n    page += 1;\n\n    if (page > 1) {\n      hideLoader2();\n      checkBtnVisibleStatus();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nfunction showMoreLoadBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\nfunction hideMoreLoadBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction checkBtnVisibleStatus() {\n  if (page >= maxPage) {\n    hideMoreLoadBtn();\n  } else {\n    showMoreLoadBtn();\n  }\n}\n"],"names":["galleryEl","formElem","SimpleLightbox","options","renderImages","array","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightbox","renderMoreImages","images","height","getPhotoBySearch","value","currentPage","KEY","response","axios","error","fetchMoreImages","params","loaderElem","loaderElem2","loadMoreBtn","page","maxPage","hideLoader","onSubmit","e","showLoader","data","renderError","checkBtnVisibleStatus","iziToast","showLoader2","hideLoader2","showMoreLoadBtn","hideMoreLoadBtn"],"mappings":"owBAIA,MAAMA,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAW,SAAS,cAAc,cAAc,EACrC,IAAIC,EAAe,YAAY,EAIhD,MAAMC,EAAU,CACd,SAAU,GACV,gBAAiB,MACjB,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,UAAW,GACb,EACO,SAASC,EAAaC,EAAO,CAChC,MAAMC,EAASD,EACV,IACD,CAAC,CACG,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACZ,IACmB;AAAA;AAAA,uBAEIN,CAAa;AAAA,wBACZC,CAAY,UAAUC,CAAI,YAAYA,CAAI;AAAA;AAAA,6DAELC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,SAMjE,EACA,KAAK,EAAE,EACZb,EAAU,UAAYM,EAEtB,MAAMQ,EAAW,IAAIZ,EAAe,eAAgBC,CAAO,EAC3DW,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,EAChBb,EAAS,MAAK,CAClB,CAGO,SAASc,EAAiBC,EAAQ,CAErC,MAAMV,EADYU,EAAO,KAEpB,IACL,CAAC,CAAE,cAAAT,EACC,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACmB;AAAA;AAAA,uBAEIN,CAAa;AAAA,wBACZC,CAAY,UAAUC,CAAI,YAAYA,CAAI;AAAA;AAAA,6DAELC,CAAK;AAAA,6DACLC,CAAK;AAAA,gEACFC,CAAQ;AAAA,iEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,SAMjE,EACA,KAAK,EAAE,EACZb,EAAU,mBAAmB,YAAaM,CAAM,EAChD,MAAMQ,EAAW,IAAIZ,EAAe,eAAgBC,CAAO,EAC3DW,EAAS,GAAG,qBAAqB,EACjCA,EAAS,QAAO,EAChBb,EAAS,MAAK,EAEd,MAAMgB,EAASjB,EAAU,kBAAkB,sBAAqB,EAAG,OACnE,SAAS,CACL,SAAU,SACV,IAAKiB,EAAS,CACtB,CAAK,CACL,CCzFO,eAAeC,EAAiBC,EAAOC,EAAa,CACzD,GAAI,CACF,MAAMC,EAAM,qCACNC,EAAW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,IACX,CACP,CAAK,EAED,GAAIE,EAAS,KAAK,QAAU,EAC1B,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAS,IACjB,OAAQE,EAAO,CACd,MAAMA,CACP,CACH,CAEO,eAAeC,EAAgBN,EAAOC,EAAa,CACxD,GAAI,CACF,MAAMM,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGP,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,KACV,KAAMC,CACZ,CAAK,EAED,IAAIJ,EAAS,MAAMO,EAAM,IAAI,4BAA4BG,CAAM,EAAE,EACjE,GAAIV,EAAO,KAAK,QAAU,EACxB,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,EAAO,IACf,OAAQQ,EAAO,CACd,MAAMA,CACP,CACH,CC3CA,MAAMvB,EAAW,SAAS,cAAc,cAAc,EAChDD,EAAY,SAAS,cAAc,YAAY,EAC/C2B,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAc,SAAS,cAAc,WAAW,EAC/C,IAAIV,EACAW,EACPC,EAEJ,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,IAEA/B,EAAS,iBAAiB,SAAUgC,CAAQ,EAE5C,eAAeA,EAASC,EAAG,CACzBA,EAAE,eAAc,EAChBC,IACAnC,EAAU,UAAY,GACtB8B,EAAO,EACPX,EAAQlB,EAAS,cAAc,eAAe,EAAE,MAEhD,GAAI,CACF,MAAMmC,EAAO,MAAMlB,EAAiBC,EAAOW,CAAI,EAC/C1B,EAAagC,EAAK,IAAI,EACtBL,EAAU,KAAK,KAAKK,EAAK,UAAY,EAAE,CACxC,OAAQZ,EAAO,CACda,EAAYb,CAAK,CACvB,QAAc,CACRQ,IACAM,GACD,CACF,CACH,CAAC,EAED,SAASD,EAAYb,EAAO,CAC1BxB,EAAU,UAAY,GACtBuC,EAAS,KAAK,CACZ,QAAS,MAAMf,CAAK,uBACpB,MAAO,MACP,SAAU,WACV,SAAU,OACd,CAAG,CACH,CAEA,SAASW,GAAa,CACpBR,EAAW,MAAM,QAAU,OAC7B,CAEA,SAASK,GAAa,CACpBL,EAAW,MAAM,QAAU,MAC7B,CACA,SAASa,GAAc,CACrBZ,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASa,GAAc,CACrBb,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEAC,EAAY,iBAAiB,QAAS,SAAY,CAChDW,IACA,GAAI,CACF,MAAMxB,EAAS,MAAMS,EAAgBN,EAAOW,CAAI,EAEhDf,EAAiBC,CAAM,EACvBc,GAAQ,EAEJA,EAAO,IACTW,IACAH,IAEH,OAAQd,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAED,SAASkB,GAAkB,CACzBb,EAAY,UAAU,OAAO,QAAQ,CACvC,CACA,SAASc,GAAkB,CACzBd,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASS,GAAwB,CAC3BR,GAAQC,EACVY,IAEAD,GAEJ"}